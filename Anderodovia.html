<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Midnight Drive - Clone</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <style>
        body { margin: 0; background: #000; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; }
        canvas { box-shadow: 0 0 20px rgba(0,255,0,0.2); }
    </style>
</head>
<body>

<script>
const config = {
    type: Phaser.AUTO,
    width: 600,
    height: 800,
    physics: {
        default: 'arcade',
        arcade: { debug: false }
    },
    scene: {
        preload: preload,
        create: create,
        update: update
    }
};

const game = new Phaser.Game(config);

let player;
let cursors;
let enemies;
let score = 0;
let scoreText;
let gameSpeed = 5;

function preload() {
    // Nota: Como não tenho acesso direto ao link da sua imagem local, 
    // vou usar cores e formas que imitam o estilo da sua foto.
}

function create() {
    // Fundo (Simulando a estrada da foto)
    this.add.rectangle(300, 400, 600, 800, 0x004400); // Grama
    this.add.polygon(300, 400, [0, 800, 600, 800, 310, 300, 290, 300], 0x333333); // Estrada em perspectiva
    
    // Faixas da estrada (Efeito de movimento)
    this.lines = this.add.group();
    for(let i = 0; i < 5; i++) {
        let line = this.add.rectangle(300, i * 200, 10, 100, 0xffffff);
        this.lines.add(line);
    }

    // Jogador (Carro Azul da foto)
    player = this.add.rectangle(300, 700, 50, 80, 0x00ccff);
    this.physics.add.existing(player);
    player.body.setCollideWorldBounds(true);

    // Inimigos
    enemies = this.physics.add.group();
    
    this.time.addEvent({
        delay: 1500,
        callback: spawnEnemy,
        callbackScope: this,
        loop: true
    });

    // Placar
    scoreText = this.add.text(20, 20, 'Distância: 0m', { fontSize: '24px', fill: '#fff' });

    // Controles
    cursors = this.input.keyboard.createCursorKeys();
    
    // Colisão
    this.physics.add.overlap(player, enemies, gameOver, null, this);
}

function update() {
    // Movimentar faixas para dar ilusão de velocidade
    this.lines.getChildren().forEach(line => {
        line.y += gameSpeed;
        if (line.y > 800) line.y = -100;
    });

    // Movimento PC
    if (cursors.left.isDown) player.x -= 7;
    else if (cursors.right.isDown) player.x += 7;

    // Movimento Mobile
    if (this.input.activePointer.isDown) {
        if (this.input.activePointer.x < 300) player.x -= 7;
        else player.x += 7;
    }

    // Aumentar dificuldade
    score += 1;
    scoreText.setText('Distância: ' + Math.floor(score/10) + 'm');
    gameSpeed += 0.001;
}

function spawnEnemy() {
    let lanes = [200, 300, 400];
    let x = lanes[Math.floor(Math.random() * lanes.length)];
    let colors = [0xff0000, 0xffff00, 0xff00ff]; // Vermelho (Ônibus), Amarelo, Rosa
    let color = colors[Math.floor(Math.random() * colors.length)];
    
    let enemy = enemies.create(x, -50, null);
    enemy.setDisplaySize(50, color === 0xff0000 ? 120 : 80);
    enemy.setInteractive();
    
    // Desenhar o "carro" inimigo
    let rect = game.scene.scenes[0].add.rectangle(0, 0, 50, color === 0xff0000 ? 120 : 80, color);
    enemy.body.velocity.y = 200 + (gameSpeed * 10);
}

function gameOver() {
    this.physics.pause();
    this.add.text(150, 350, 'FIM DE JOGO', { fontSize: '60px', fill: '#ff0000', fontWeight: 'bold' });
    this.input.on('pointerdown', () => location.reload());
}
</script>

</body>
</html>
