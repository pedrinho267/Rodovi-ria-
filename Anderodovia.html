<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dino Adventure</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
            overflow: hidden;
            touch-action: manipulation;
        }

        #game-board {
            position: relative;
            width: 600px;
            height: 200px;
            background-color: white;
            border-bottom: 2px solid #535353;
            overflow: hidden;
        }

        /* DINO */
        #dino {
            position: absolute;
            width: 40px;
            height: 45px;
            bottom: 0;
            left: 50px;
            background-color: #535353;
            border-radius: 4px;
        }
        #dino::after { /* Olho do Dino */
            content: '';
            position: absolute;
            top: 8px;
            right: 8px;
            width: 4px;
            height: 4px;
            background-color: white;
        }

        /* CACTO */
        .cactus {
            position: absolute;
            bottom: 0;
            width: 20px;
            height: 40px;
            background-color: #535353;
        }

        /* NUVEM */
        .cloud {
            position: absolute;
            background: #d3d3d3;
            width: 40px;
            height: 15px;
            border-radius: 20px;
            opacity: 0.5;
        }

        /* UI */
        #score-board {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 18px;
            color: #535353;
            font-weight: bold;
        }

        #overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        h1 { color: #535353; margin-bottom: 10px; }
        button {
            padding: 10px 25px;
            font-size: 16px;
            background: #535353;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }
        button:hover { background: #333; }
    </style>
</head>
<body>

<div id="game-board">
    <div id="score-board">00000</div>
    <div id="dino"></div>
    
    <div id="overlay">
        <h1 id="status-text">DINO RUN</h1>
        <button id="start-btn">JOGAR</button>
    </div>
</div>

<script>
    const board = document.getElementById('game-board');
    const dino = document.getElementById('dino');
    const scoreBoard = document.getElementById('score-board');
    const overlay = document.getElementById('overlay');
    const startBtn = document.getElementById('start-btn');
    const statusText = document.getElementById('status-text');

    // Configurações do Jogo
    let gameRunning = false;
    let score = 0;
    let gravity = 0.6;
    let jumpStrength = -12;
    let velocityY = 0;
    let dinoY = 0;
    let gameSpeed = 5;
    let obstacles = [];
    let clouds = [];

    function startGame() {
        score = 0;
        gameSpeed = 5;
        obstacles.forEach(o => o.el.remove());
        clouds.forEach(c => c.el.remove());
        obstacles = [];
        clouds = [];
        dinoY = 0;
        velocityY = 0;
        gameRunning = true;
        overlay.style.display = 'none';
        requestAnimationFrame(update);
    }

    function jump() {
        if (dinoY === 0 && gameRunning) {
            velocityY = jumpStrength;
        }
    }

    function createCactus() {
        if (Math.random() < 0.02 && obstacles.length < 2) {
            const el = document.createElement('div');
            el.className = 'cactus';
            const left = 600;
            board.appendChild(el);
            obstacles.push({ el, left });
        }
    }

    function createCloud() {
        if (Math.random() < 0.01) {
            const el = document.createElement('div');
            el.className = 'cloud';
            const left = 600;
            const top = Math.random() * 80 + 20;
            board.appendChild(el);
            clouds.push({ el, left, top });
        }
    }

    function update() {
        if (!gameRunning) return;

        // Física do Pulo
        velocityY += gravity;
        dinoY -= velocityY;
        if (dinoY < 0) {
            dinoY = 0;
            velocityY = 0;
        }
        dino.style.bottom = dinoY + 'px';

        // Obstáculos
        for (let i = obstacles.length - 1; i >= 0; i--) {
            obstacles[i].left -= gameSpeed;
            obstacles[i].el.style.left = obstacles[i].left + 'px';

            // Colisão (Hitbox um pouco menor para ser justo)
            if (obstacles[i].left < 90 && obstacles[i].left > 50 && dinoY < 40) {
                gameOver();
            }

            if (obstacles[i].left < -20) {
                obstacles[i].el.remove();
                obstacles.splice(i, 1);
                score += 10;
                gameSpeed += 0.1; // Aumenta dificuldade
            }
        }

        // Nuvens
        for (let i = clouds.length - 1; i >= 0; i--) {
            clouds[i].left -= 1;
            clouds[i].el.style.left = clouds[i].left + 'px';
            clouds[i].el.style.top = clouds[i].top + 'px';
            if (clouds[i].left < -50) {
                clouds[i].el.remove();
                clouds.splice(i, 1);
            }
        }

        createCactus();
        createCloud();
        
        scoreBoard.innerText = Math.floor(score).toString().padStart(5, '0');
        requestAnimationFrame(update);
    }

    function gameOver() {
        gameRunning = false;
        overlay.style.display = 'flex';
        statusText.innerText = 'GAME OVER';
        startBtn.innerText = 'TENTAR NOVAMENTE';
    }

    // Input Listeners
    window.addEventListener('keydown', (e) => { if (e.code === 'Space' || e.code === 'ArrowUp') jump(); });
    window.addEventListener('touchstart', jump);
    startBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        startGame();
    });
</script>

</body>
</html>
