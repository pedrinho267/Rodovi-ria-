<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rodovia Retro Turbo</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        canvas { display: block; width: 100vw; height: 100vh; touch-action: none; }
        #ui { 
            position: absolute; top: 20px; width: 100%; 
            color: white; text-align: center; font-size: 32px; font-weight: bold;
            text-shadow: 0 0 10px rgba(0,0,0,0.5); pointer-events: none; 
        }
        .instructions {
            position: absolute; bottom: 30px; width: 100%;
            color: white; text-align: center; font-size: 16px; opacity: 0.7;
        }
    </style>
</head>
<body>
    <div id="ui">SCORE: <span id="score">0</span></div>
    <div class="instructions">SEGURE AS LATERAIS PARA MOVER</div>
    <canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreElement = document.getElementById('score');

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    let score = 0;
    let gameActive = true;
    let speed = 0.08; 
    let cameraZ = 0;

    // Configuração do Jogador com interpolação
    const player = {
        x: 0,         // Posição atual
        targetX: 0,   // Posição desejada
        w: 0.3,
        lerpSpeed: 0.15 // Suavidade do movimento (0 a 1)
    };

    const obstacles = [];
    const keys = { left: false, right: false };

    function spawnObstacle() {
        if(!gameActive) return;
        const lanes = [-0.6, 0, 0.6];
        const lane = lanes[Math.floor(Math.random() * lanes.length)];
        obstacles.push({ x: lane, z: cameraZ + 30, type: 'rock' });
    }

    setInterval(spawnObstacle, 800);

    function project(pX, pY, pZ) {
        const perspective = 0.6;
        const scale = perspective / (pZ - cameraZ);
        const x = (canvas.width / 2) + (pX * scale * canvas.width);
